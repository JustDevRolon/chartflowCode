<div #minimapContainer class="relative bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm border border-slate-200 dark:border-slate-700 shadow-2xl rounded-xl overflow-hidden select-none group transition-all duration-200"
         [style.width.px]="width"
         [style.height.px]="height"
         (mousedown)="onMouseDown($event)"
         (touchstart)="onMouseDown($event)">
      
      <svg [attr.width]="width" [attr.height]="height" class="w-full h-full pointer-events-none">
        
        <!-- Background Grid (Optional aesthetic) -->
        <defs>
            <pattern id="miniGrid" width="10" height="10" patternUnits="userSpaceOnUse">
                <circle cx="1" cy="1" r="0.5" class="fill-slate-200 dark:fill-slate-700"></circle>
            </pattern>
        </defs>
        <rect width="100%" height="100%" fill="url(#miniGrid)" />
        
        <!-- Drawings Representation -->
        @for (drawing of miniDrawings(); track drawing.id) {
            <path 
                [attr.d]="drawing.path"
                fill="none"
                [attr.stroke]="drawing.color"
                [attr.stroke-width]="1"
                class="opacity-50"
            />
        }

        <!-- Nodes Representation -->
        @for (node of miniNodes(); track node.id) {
           <rect 
             [attr.x]="node.x" 
             [attr.y]="node.y" 
             [attr.width]="node.w" 
             [attr.height]="node.h"
             [attr.rx]="2"
             [attr.fill]="node.color"
             class="opacity-60"
           />
        }

        <!-- Viewport Indicator (The "Blue Box") -->
        <rect 
          [attr.x]="viewport().x" 
          [attr.y]="viewport().y" 
          [attr.width]="viewport().w" 
          [attr.height]="viewport().h"
          rx="4"
          fill="rgba(59, 130, 246, 0.1)"
          stroke="#3b82f6"
          stroke-width="1.5"
          class="transition-all duration-75"
        />
      </svg>
      
      <!-- Interaction Overlay text (optional) -->
      @if (miniNodes().length === 0 && miniDrawings().length === 0) {
          <div class="absolute inset-0 flex items-center justify-center text-[10px] text-slate-400">
              Lienzo Vac√≠o
          </div>
      }
    </div>
  